<html>
<head>
  <title>Test stringPattern in vanilla</title>
</head>

<label for="maskedInput">
  This input has a U.S. phone number pattern
  <input type="text" class="maskedInput" id="maskedInput"/>
</label>

<body>
<script type="text/javascript" src="../dist/stringPattern.min.js"></script>

<script>
  var pattern = '(111) 111-1111'
  var input = document.querySelector('.maskedInput')
  var lastUserInputValue = ''

  input.value = stringPattern.conformToPattern('', pattern)

  input.addEventListener('input', function(event) {
    var currentInputValue = event.target.value
    var phoneNumber = stringPattern.conformToPattern(currentInputValue, pattern)

    var cursorPosition = stringPattern.adjustCursorPosition(
      lastUserInputValue,
      currentInputValue,
      event.target.selectionStart,
      pattern
    )

    input.value = phoneNumber
    input.setSelectionRange(cursorPosition, cursorPosition)
    lastUserInputValue = phoneNumber
  })
</script>
</body>
</html>
