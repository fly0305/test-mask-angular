!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.textMaskCore=t():e.textMaskCore=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);Object.defineProperty(t,"conformToMask",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(7);Object.defineProperty(t,"adjustCaretPosition",{enumerable:!0,get:function(){return r(i)["default"]}});var u=n(3);Object.defineProperty(t,"convertMaskToPlaceholder",{enumerable:!0,get:function(){return u.convertMaskToPlaceholder}})},function(e,t){"use strict";function n(){}function r(e,t,n,r,o){for(var i=0,u=t.length,a=0,s=0;u>i;i++){var f=t[i];if(f.removed){if(f.value=r.slice(s,s+f.count).join(""),s+=f.count,i&&t[i-1].added){var l=t[i-1];t[i-1]=t[i],t[i]=l}}else{if(!f.added&&o){var c=n.slice(a,a+f.count);c=c.map(function(e,t){var n=r[s+t];return n.length>e.length?n:e}),f.value=c.join("")}else f.value=n.slice(a,a+f.count).join("");a+=f.count,f.added||(s+=f.count)}}var d=t[u-1];return(d.added||d.removed)&&e.equals("",d.value)&&(t[u-2].value+=d.value,t.pop()),t}function o(e){return{newPos:e.newPos,components:e.components.slice(0)}}t.__esModule=!0,t["default"]=n,n.prototype={diff:function(e,t){function n(e){return a?(setTimeout(function(){a(void 0,e)},0),!0):e}function i(){for(var i=-1*c;c>=i;i+=2){var u=void 0,a=p[i-1],d=p[i+1],h=(d?d.newPos:0)-i;a&&(p[i-1]=void 0);var v=a&&a.newPos+1<f,g=d&&h>=0&&l>h;if(v||g){if(!v||g&&a.newPos<d.newPos?(u=o(d),s.pushComponent(u.components,void 0,!0)):(u=a,u.newPos++,s.pushComponent(u.components,!0,void 0)),h=s.extractCommon(u,t,e,i),u.newPos+1>=f&&h+1>=l)return n(r(s,u.components,t,e,s.useLongestToken));p[i]=u}else p[i]=void 0}c++}var u=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=u.callback;"function"==typeof u&&(a=u,u={}),this.options=u;var s=this;e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var f=t.length,l=e.length,c=1,d=f+l,p=[{newPos:-1,components:[]}],h=this.extractCommon(p[0],t,e,0);if(p[0].newPos+1>=f&&h+1>=l)return n([{value:t.join(""),count:t.length}]);if(a)!function g(){setTimeout(function(){return c>d?a():void(i()||g())},0)}();else for(;d>=c;){var v=i();if(v)return v}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){for(var o=t.length,i=n.length,u=e.newPos,a=u-r,s=0;o>u+1&&i>a+1&&this.equals(t[u+1],n[a+1]);)u++,a++,s++;return s&&e.components.push({count:s}),e.newPos=u,a},equals:function(e,t){return e===t},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maskingCharactersEnums={numeric:"1",alphabetic:"A",alphanumeric:"?"},t.maskingCharacters=["1","A","?"],t.placeholderCharacter="_"},function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return e.replace(/1/g,s.placeholderCharacter)}function o(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return u(e).reduce(function(e,t){return-1===s.maskingCharacters.indexOf(t)&&-1===e.indexOf(t)&&e.push(t),e},[])}function i(){for(var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=0;n<e.length;n++){var r=e[n];if(r.area===t.area&&r.position===t.position)return r.character}}function u(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return e.split("")}function a(e,t){if("string"!=typeof e)return null;switch(t){case s.maskingCharactersEnums.numeric:return!isNaN(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertMaskToPlaceholder=r,t.getDelimiters=o,t.findCharacter=i,t.tokenize=u,t.isAcceptableCharacter=a;var s=n(2)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return f.diff(e,t,n)}function i(e,t,n){var r=s.generateOptions(n,{ignoreWhitespace:!0});return f.diff(e,t,r)}t.__esModule=!0,t.diffLines=o,t.diffTrimmedLines=i;var u=n(1),a=r(u),s=n(6),f=new a["default"];t.lineDiff=f,f.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t}},function(e,t){"use strict";function n(e){function t(){var e={};for(u.push(e);a<i.length;){var t=i[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(t))break;var s=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(t);s&&(e.index=s[1]),a++}for(n(e),n(e),e.hunks=[];a<i.length;){var t=i[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(t))break;if(/^@@/.test(t))e.hunks.push(r());else{if(t&&o.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(t));a++}}}function n(e){var t=/^(\-\-\-|\+\+\+)\s+(\S+)\s?(.+?)\s*$/.exec(i[a]);if(t){var n="---"===t[1]?"old":"new";e[n+"FileName"]=t[2],e[n+"Header"]=t[3],a++}}function r(){for(var e=a,t=i[a++],n=t.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),r={oldStart:+n[1],oldLines:+n[2]||1,newStart:+n[3],newLines:+n[4]||1,lines:[]},u=0,s=0;a<i.length;a++){var f=i[a][0];if("+"!==f&&"-"!==f&&" "!==f&&"\\"!==f)break;r.lines.push(i[a]),"+"===f?u++:"-"===f?s++:" "===f&&(u++,s++)}if(u||1!==r.newLines||(r.newLines=0),s||1!==r.oldLines||(r.oldLines=0),o.strict){if(u!==r.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(s!==r.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return r}for(var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e.split("\n"),u=[],a=0;a<i.length;)t();return u}t.__esModule=!0,t.parsePatch=n},function(e,t){"use strict";function n(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}t.__esModule=!0,t.generateOptions=n},function(e,t,n){"use strict";function r(e){var t=e.previousInput,n=void 0===t?"":t,r=e.conformToMaskResults,s=void 0===r?{}:r,f=e.currentCaretPosition,l=void 0===f?0:f;s.input=s.input||"",s.output=s.output||"",s.mask=s.mask||"";var c=(0,u.convertMaskToPlaceholder)(s.mask),d=n!==c&&(s.output.length<n.length||s.input.length<n.length);if(d===!1){if(n===s.output)return l-1;var p=function(){var e=(0,i.diffChars)(n,s.output),t=null,r="";if(e.forEach(function(e){r+=e.value,e.added===!0&&(t=r.length-1)}),t-l>0)return{v:l};for(var o=t+1;o<c.length;o++)if(c[o]===a.placeholderCharacter)return{v:o}}();return"object"===("undefined"==typeof p?"undefined":o(p))?p.v:s.output.length}if(d===!0){if(n===s.output){if(c[l]===a.placeholderCharacter)return l;for(var h=l;h>0;h--)if(c[h]===a.placeholderCharacter)return h+1}else{var v=function(){var e=(0,i.diffChars)(n,s.output),t=null,r="";if(e.forEach(function(e){null===t&&(r+=e.value,e.removed===!0&&(t=r.length-1))}),t-l>0)return{v:l};if(c[l-1]===a.placeholderCharacter)return{v:l};for(var o=t-1;o>0;o--)if(c[o]===a.placeholderCharacter)return{v:o+1}}();if("object"===("undefined"==typeof v?"undefined":o(v)))return v.v}return 0}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var i=n(16),u=n(3),a=n(2)},function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=(0,o.convertMaskToPlaceholder)(t),r=(0,o.tokenize)(e),u=(0,o.getDelimiters)(t);return{input:e,mask:t,output:(0,o.tokenize)(n).map(function(e){if(e!==i.placeholderCharacter)return e;if(!(r.length>0))return i.placeholderCharacter;for(var t=r.length,n=0;t>n;n++){var o=r[n];if(-1===u.indexOf(o))return r.splice(0,n+1),o}}).join("")}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(3),i=n(2)},function(e,t){"use strict";function n(e){for(var t=[],n=void 0,r=void 0,o=0;o<e.length;o++)n=e[o],r=n.added?1:n.removed?-1:0,t.push([r,n.value]);return t}t.__esModule=!0,t.convertChangesToDMP=n},function(e,t){"use strict";function n(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];o.added?t.push("<ins>"):o.removed&&t.push("<del>"),t.push(r(o.value)),o.added?t.push("</ins>"):o.removed&&t.push("</del>")}return t.join("")}function r(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}t.__esModule=!0,t.convertChangesToXML=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return a.diff(e,t,n)}t.__esModule=!0,t.diffChars=o;var i=n(1),u=r(i),a=new u["default"];t.characterDiff=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return a.diff(e,t,n)}t.__esModule=!0,t.diffCss=o;var i=n(1),u=r(i),a=new u["default"];t.cssDiff=a,a.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return l.diff(e,t,n)}function i(e,t,n){t=t||[],n=n||[];var r=void 0;for(r=0;r<t.length;r+=1)if(t[r]===e)return n[r];var o=void 0;if("[object Array]"===f.call(e)){for(t.push(e),o=new Array(e.length),n.push(o),r=0;r<e.length;r+=1)o[r]=i(e[r],t,n);t.pop(),n.pop()}else if("object"==typeof e&&null!==e){t.push(e),o={},n.push(o);var u=[],a=void 0;for(a in e)e.hasOwnProperty(a)&&u.push(a);for(u.sort(),r=0;r<u.length;r+=1)a=u[r],o[a]=i(e[a],t,n);t.pop(),n.pop()}else o=e;return o}t.__esModule=!0,t.diffJson=o,t.canonicalize=i;var u=n(1),a=r(u),s=n(4),f=Object.prototype.toString,l=new a["default"];t.jsonDiff=l,l.useLongestToken=!0,l.tokenize=s.lineDiff.tokenize,l.castInput=function(e){return"string"==typeof e?e:JSON.stringify(i(e),void 0,"  ")},l.equals=function(e,t){return a["default"].prototype.equals(e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return a.diff(e,t,n)}t.__esModule=!0,t.diffSentences=o;var i=n(1),u=r(i),a=new u["default"];t.sentenceDiff=a,a.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r=s.generateOptions(n,{ignoreWhitespace:!0});return c.diff(e,t,r)}function i(e,t,n){return c.diff(e,t,n)}t.__esModule=!0,t.diffWords=o,t.diffWordsWithSpace=i;var u=n(1),a=r(u),s=n(6),f=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,l=/\S/,c=new a["default"];t.wordDiff=c,c.equals=function(e,t){return e===t||this.options.ignoreWhitespace&&!l.test(e)&&!l.test(t)},c.tokenize=function(e){for(var t=e.split(/(\s+|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&f.test(t[n])&&f.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(1),i=r(o),u=n(11),a=n(15),s=n(4),f=n(14),l=n(12),c=n(13),d=n(17),p=n(5),h=n(18),v=n(9),g=n(10);t.Diff=i["default"],t.diffChars=u.diffChars,t.diffWords=a.diffWords,t.diffWordsWithSpace=a.diffWordsWithSpace,t.diffLines=s.diffLines,t.diffTrimmedLines=s.diffTrimmedLines,t.diffSentences=f.diffSentences,t.diffCss=l.diffCss,t.diffJson=c.diffJson,t.structuredPatch=h.structuredPatch,t.createTwoFilesPatch=h.createTwoFilesPatch,t.createPatch=h.createPatch,t.applyPatch=d.applyPatch,t.applyPatches=d.applyPatches,t.parsePatch=p.parsePatch,t.convertChangesToDMP=v.convertChangesToDMP,t.convertChangesToXML=g.convertChangesToXML,t.canonicalize=c.canonicalize},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){function n(e,t){for(var n=0;n<e.lines.length;n++){var r=e.lines[n],i=r[0],u=r.substr(1);if(" "===i||"-"===i){if(!a(t+1,o[t],i,u)&&(f++,f>l))return!1;t++}}return!0}var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if("string"==typeof t&&(t=u.parsePatch(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}for(var o=e.split("\n"),i=t.hunks,a=r.compareLine||function(e,t,n,r){return t===r},f=0,l=r.fuzzFactor||0,c=0,d=0,p=void 0,h=void 0,v=0;v<i.length;v++){for(var g=i[v],m=o.length-g.oldLines,y=0,_=d+g.oldStart-1,w=s["default"](_,c,m);void 0!==y;y=w())if(n(g,_+y)){g.offset=d+=y;break}if(void 0===y)return!1;c=g.offset+g.oldStart+g.oldLines}for(var v=0;v<i.length;v++)for(var g=i[v],_=g.offset+g.newStart-1,P=0;P<g.lines.length;P++){var k=g.lines[P],M=k[0],C=k.substr(1);if(" "===M)_++;else if("-"===M)o.splice(_,1);else if("+"===M)o.splice(_,0,C),_++;else if("\\"===M){var b=g.lines[P-1]?g.lines[P-1][0]:null;"+"===b?p=!0:"-"===b&&(h=!0)}}if(p)for(;!o[o.length-1];)o.pop();else h&&o.push("");return o.join("\n")}function i(e,t){function n(){var i=e[r++];return i?void t.loadFile(i,function(e,r){if(e)return t.complete(e);var u=o(r,i,t);t.patched(i,u),setTimeout(n,0)}):t.complete()}"string"==typeof e&&(e=u.parsePatch(e));var r=0;n()}t.__esModule=!0,t.applyPatch=o,t.applyPatches=i;var u=n(5),a=n(19),s=r(a)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n,o,i,u,s){function f(e){return e.map(function(e){return" "+e})}s||(s={context:4});var l=a.diffLines(n,o);l.push({value:"",lines:[]});for(var c=[],d=0,p=0,h=[],v=1,g=1,m=function(e){var t=l[e],i=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=i,t.added||t.removed){var u;if(!d){var a=l[e-1];d=v,p=g,a&&(h=s.context>0?f(a.lines.slice(-s.context)):[],d-=h.length,p-=h.length)}(u=h).push.apply(u,r(i.map(function(e){return(t.added?"+":"-")+e}))),t.added?g+=i.length:v+=i.length}else{if(d)if(i.length<=2*s.context&&e<l.length-2){var m;(m=h).push.apply(m,r(f(i)))}else{var y,_=Math.min(i.length,s.context);(y=h).push.apply(y,r(f(i.slice(0,_))));var w={oldStart:d,oldLines:v-d+_,newStart:p,newLines:g-p+_,lines:h};if(e>=l.length-2&&i.length<=s.context){var P=/\n$/.test(n),k=/\n$/.test(o);0!=i.length||P?P&&k||h.push("\\ No newline at end of file"):h.splice(w.oldLines,0,"\\ No newline at end of file")}c.push(w),d=0,p=0,h=[]}v+=i.length,g+=i.length}},y=0;y<l.length;y++)m(y);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:u,hunks:c}}function i(e,t,n,r,i,u,a){var s=o(e,t,n,r,i,u,a),f=[];e==t&&f.push("Index: "+e),f.push("==================================================================="),f.push("--- "+s.oldFileName+("undefined"==typeof s.oldHeader?"":"	"+s.oldHeader)),f.push("+++ "+s.newFileName+("undefined"==typeof s.newHeader?"":"	"+s.newHeader));for(var l=0;l<s.hunks.length;l++){var c=s.hunks[l];f.push("@@ -"+c.oldStart+","+c.oldLines+" +"+c.newStart+","+c.newLines+" @@"),f.push.apply(f,c.lines)}return f.join("\n")+"\n"}function u(e,t,n,r,o,u){return i(e,e,t,n,r,o,u)}t.__esModule=!0,t.structuredPatch=o,t.createTwoFilesPatch=i,t.createPatch=u;var a=n(4)},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t,n){var r=!0,o=!1,i=!1,u=1;return function(){for(var a=!0;a;){if(a=!1,r&&!i){if(o?u++:r=!1,n>=e+u)return u;i=!0}if(o);else{if(i||(r=!0),e-u>=t)return-u++;o=!0,a=!0}}}},e.exports=t["default"]}])});